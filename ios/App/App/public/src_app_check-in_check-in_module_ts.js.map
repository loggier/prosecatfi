{"version":3,"file":"src_app_check-in_check-in_module_ts.js","mappings":"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","sources":["./src/app/check-in/check-in-routing.module.ts","./src/app/check-in/check-in.module.ts","./src/app/check-in/check-in.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CheckInPage } from './check-in.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CheckInPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class CheckInPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CheckInPageRoutingModule } from './check-in-routing.module';\n\nimport { CheckInPage } from './check-in.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    CheckInPageRoutingModule\n  ],\n  declarations: [CheckInPage]\n})\nexport class CheckInPageModule {}\n","interface DataUser {\n  name: string;\n  is_empleado?: {\n    foto?: string;\n    documento?: string;\n    cargos?: {\n      nombre: string;\n    };\n  };\n}\nimport { Component, OnInit } from '@angular/core';\n \nimport * as moment from 'moment-timezone';\n import { NavController, AlertController, ToastController, LoadingController } from '@ionic/angular';\nimport { environment } from 'src/environments/environment';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Geolocation } from '@awesome-cordova-plugins/geolocation/ngx';\n\n@Component({\n  selector: 'app-check-in',\n  templateUrl: './check-in.page.html',\n  styleUrls: ['./check-in.page.scss'],\n})\nexport class CheckInPage implements OnInit {\n\n  isModalOpen= false;\n  date= null;\n  date_format = null;\n  date_format_send = null;\n  token= null;\n  profile=null;\n  isSupervisor = false;\n  data_user: DataUser;\n  data_vehiculos=null;\n  vehiculo_select = null;\n  asistencias= null;\n  max_date=null;\n  timer=null;\n  time = null;\n  data = null;\n  tipo = 'Entrada';\n  comentario= '';\n  loading= null;\n  busqueda = false; \n  latitud = 0;\n  longitud = 0;\n  server = environment.server;\n\n  constructor(public api: HttpClient, private alertController: AlertController, private navCtrl: NavController, private geolocation: Geolocation, public toastController: ToastController, private loadingCtrl: LoadingController) { \n   \n  }\n\n  goToEmpleados(){\n    this.navCtrl.navigateForward('empleados');\n  }\n\n  ngOnInit() {\n    \n    this.date_format =   moment().tz('Europe/Madrid').format(\"DD/MM/YYYY\");\n\n    this.date_format_send =   moment().tz('Europe/Madrid').format('YYYY-MM-DD'),\n    this.date =   moment().tz('Europe/Madrid').toISOString();\n    this.max_date =   moment().tz('Europe/Madrid').toISOString();\n\n    if(localStorage.profile){\n      this.profile =  JSON.parse(localStorage.profile);\n      if(this.profile.access_token){\n        this.navCtrl.navigateForward('check-in');\n      }\n    }else {\n      this.navCtrl.navigateForward('home');\n    }\n    this.time = moment().tz('Europe/Madrid').format('hh:mm');\n\n    console.log(this.profile);\n    this.loadDataVehiclo();\n    this.loadData();\n    this.loadDataAsistencia();\n    this.updateTime();\n  }\n\n\n\n  setOpen(isOpen: boolean) {\n     this.isModalOpen = isOpen;\n     this.date_format =   moment(this.date).format(\"DD/MM/YYYY\");\n     this.date_format_send =   moment(this.date).format('YYYY-MM-DD');\n\n     let d =     moment(this.date).format('YYYY-MM-DD');\n     let n = moment(this.max_date).format('YYYY-MM-DD');\n\n     console.log(n,d);\n\n     if (n==d){\n      this.busqueda = false;\n     }else {\n      this.busqueda=true; \n     }\n     this.loadDataAsistencia();\n  }\n\n  loadData(){\n    let post = {\n      \n    }\n    const httpHeaders = new HttpHeaders ({\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${this.profile.access_token}`     \n   });\n\n   let self = this; \n\n  this.api.post(`${environment.url}/process/dataUser`, post,{headers:httpHeaders}).subscribe(data => {\n    console.log(data);\n    const d: any = data;\n    this.data_user = d;\n    // Marcar si el cargo del empleado es SUPERVISOR (case-insensitive)\n    this.isSupervisor = (d?.is_empleado?.cargos?.nombre || '').toString().toUpperCase() === 'SUPERVISOR';\n     \n   }, error => {\n    if(error.status==401){\n     \n    }\n    \n  });\n  }\n  loadDataVehiclo(){\n    let post = {\n      \n    }\n    const httpHeaders = new HttpHeaders ({\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${this.profile.access_token}`     \n   });\n\n   let self = this; \n\n  this.api.post(`${environment.url}/process/dataVehiculos`, post,{headers:httpHeaders}).subscribe(data => {\n    console.log(data);\n    this.data_vehiculos = data; \n     \n   }, error => {\n    if(error.status==401){\n     \n    }\n    \n  });\n  }\n  loadDataAsistencia(){\n\n    console.log(this.date_format_send);\n    let post = {\n\n      fecha:  this.date_format_send\n      \n    }\n    const httpHeaders = new HttpHeaders ({\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${this.profile.access_token}`     \n   });\n\n   console.log(post);\n\n   let self = this; \n\n  this.api.post(`${environment.url}/process/dataAsistencias`, post,{headers:httpHeaders}).subscribe(data => {\n    console.log(data);\n    this.asistencias = data; \n    this.tipo= 'Entrada';\n    if(this.asistencias.Ultimo){\n\n      if(this.asistencias.Ultimo.tipo=='Entrada'){\n        this.tipo= 'Salida';\n      }else {\n        this.tipo= 'Entrada';\n      }\n      \n    }\n\n   \n     \n   }, error => {\n    console.log(error);\n    if(error.status==401){\n     \n    }\n    \n  });\n  }\n  async presentAlert(type,msj) {\n    const alert = await this.alertController.create({\n      header: type,\n      mode: 'ios',\n      message: msj,\n      buttons: ['OK']\n    });\n\n    await alert.present();\n  }\n  updateTime(){\n\n    this.timer = setInterval(() => {\n        this.time = moment().tz('Europe/Madrid').format('hh:mm');\n        this.updatePosition();\n     }, 10000);\n  }\n  ionViewWillLeave(){\n    clearInterval(this.timer);\n  }\n\n  updatePosition(){\n    let self = this;\n    this.geolocation.getCurrentPosition().then((resp) => {\n      self.latitud= resp.coords.latitude;\n      self.longitud= resp.coords.longitude;\n\n   }).catch((error) => {\n     \n    this.presentToastError('Debe activar el GPS del dispositivo.');\n   });\n\n  }\n  check (){\n\n   \n    if(this.data_vehiculos?.Data.length>0 && this.vehiculo_select==null){\n      this.presentToastError('Debe Seleccionar un Vehículo');\n      return false; \n    }\n    \n \n\n    this.showLoading();\n\n\n\n    let ultimo = this.asistencias.Ultimo?this.asistencias.Ultimo.tipo:null;\n    let post =  {\n      fecha: moment().tz('Europe/Madrid').format('YYYY-MM-DD'),\n      vehiculo:this.vehiculo_select?this.vehiculo_select:null,\n      latitud:this.latitud,\n      longitud:this.longitud,\n      tipo:ultimo,\n      comentario:this.comentario\n\n    }\n    console.log(post);\n \n\n    const httpHeaders = new HttpHeaders ({\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${this.profile.access_token}`     \n   });\n\n   let self = this; \n\n\n \n\n    \n    this.api.post(`${environment.url}/process/storeAsistencias`, post,{headers:httpHeaders}).subscribe(data => {\n      console.log(data);\n      self.data= data;\n      if( self.data.id_direccion==null){\n\n        console.log('Fuera de oficina');\n        self.presentToast('Fichaje registrado fuera de fabrica.');\n\n        self.loading.dismiss();\n\n      }else {\n        self.presentToast('Fichaje registrado exitosamente.');\n        self.loading.dismiss();\n      }\n\n      self.loadDataVehiclo();\n      self.loadData();\n      self.loadDataAsistencia();\n       \n     }, error => {\n      self.loading.dismiss();\n      if(error.status==401){\n        \n       \n      }\n    })\n\n\n   this.vehiculo_select= null;\n\n}\n\ncheckGPSPermission () {\n\n  this.navCtrl.navigateForward('permisos');\n  \n\n}\nionViewDidEnter(){\n  this.updatePosition();\n}\n\nasync presentToast(msj) {\n  const toast = await this.toastController.create({\n    message: msj,\n    duration: 2000\n  });\n  toast.present();\n}\n\nasync confirm() {\n  this.comentario='';\n  const alert = await this.alertController.create({\n    header: '¿Deseas Marcar '+this.tipo+'?',\n    buttons: [\n      {\n        text: 'SI',\n        role: 'confirm',\n        handler: (data) => { this.comentario= data.comentario;  this.check() }\n      },\n      {\n        text: 'NO',\n        role: 'cancel',\n        handler: () => {   }\n      }\n    ],\n    inputs: [\n      \n      {\n        name: 'comentario',\n        type: 'textarea',\n        placeholder: 'Agregar comentario'\n      }\n    ]\n  });\n\n  await alert.present();\n}\n\nasync showLoading() {\n  this.loading = await this.loadingCtrl.create({\n    message: 'Marcando fichaje...',\n \n    spinner: 'circles'\n  });\n  \n  this.loading.present();\n}\n\nasync presentToastError(msj) {\n  const toast = await this.toastController.create({\n    message: msj,\n    duration: 1000,\n    color:'danger',\n    position:'middle'\n  });\n  toast.present();\n}\n\n\nlogout2(){\n\n  let post = {\n      \n  }\n  const httpHeaders = new HttpHeaders ({\n    'Content-Type': 'application/json',\n    'Authorization': `Bearer ${this.profile.access_token}`     \n });\n\n let self = this; \n\n  this.api.post(`${environment.url}/auth/logout`, post,{headers:httpHeaders}).subscribe(data => {\n    localStorage.clear();\n    self.navCtrl.navigateForward('login');\n    \n     \n   }, error => {\n    \n    if(error.status==401){\n      \n     \n    }\n  })\n}\nasync logout(){\n \n    const alert = await this.alertController.create({\n      header: '¿Deseas Salir?',\n      buttons: [\n        {\n          text: 'SI',\n          role: 'confirm',\n          handler: (data) => {   this.logout2() }\n        },\n        {\n          text: 'NO',\n          role: 'cancel',\n          handler: () => {   }\n        }\n      ],\n  \n    });\n  \n    await alert.present();\n  \n\n}\npolitica(){\n  this.navCtrl.navigateForward('politica-privacidad');\n}\ndoRefresh(event){\n  this.loadDataAsistencia();\n\n  setTimeout(() => {\n    console.log('Async operation has ended');\n    event.target.complete();\n  }, 2000);\n}\n \n}\n"],"names":["Component","moment","NavController","AlertController","ToastController","LoadingController","environment","HttpClient","HttpHeaders","Geolocation","CheckInPage","constructor","api","alertController","navCtrl","geolocation","toastController","loadingCtrl","server","goToEmpleados","navigateForward","ngOnInit","date_format","tz","format","date_format_send","date","toISOString","max_date","localStorage","profile","JSON","parse","access_token","time","console","log","loadDataVehiclo","loadData","loadDataAsistencia","updateTime","setOpen","isOpen","isModalOpen","d","n","busqueda","post","httpHeaders","self","url","headers","subscribe","data","data_user","isSupervisor","is_empleado","cargos","nombre","toString","toUpperCase","error","status","data_vehiculos","fecha","asistencias","tipo","Ultimo","presentAlert","type","msj","alert","create","header","mode","message","buttons","present","timer","setInterval","updatePosition","ionViewWillLeave","clearInterval","getCurrentPosition","then","resp","latitud","coords","latitude","longitud","longitude","catch","presentToastError","check","Data","length","vehiculo_select","showLoading","ultimo","vehiculo","comentario","id_direccion","presentToast","loading","dismiss","checkGPSPermission","ionViewDidEnter","toast","duration","confirm","text","role","handler","inputs","name","placeholder","spinner","color","position","logout2","clear","logout","politica","doRefresh","event","setTimeout","target","complete","selector","template"],"sourceRoot":"webpack:///"}